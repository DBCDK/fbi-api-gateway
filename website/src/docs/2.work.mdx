# Work

A work is some creation like a book, article, movie etc.
It may exist in many different forms or manifestations. For instance, a
book may be available in multiple physical and online variants. A movie could be
streamed online or maybe borrowed on DVD or Bluray.

In the following examples we show how to get metadata for a work and its manifestations.

## The Basics of a Work

Different user interfaces have different needs, hence we offer several ways to fetch
metadata. Fields named _display_, or _summary_ hide complexity at the cost of
flexibility.

An example is time periods, where the value of _display_ could be "1980 - 1990". But
The fields _begin_ and _end_ may be fetched seperately. Likewise, a list of subjects
can easily be shown with _display_, but if the subject is for instance a Person,
more fields are available.

In this example we fetch often used fields in the simplest way possible.

<InlineGraphiQL
  query={`query ($id: String!) {
  work(id: $id) {
    workId
    titles {
      full
    }
    abstract
    creators {
      display
    }
    subjects {
      dbcVerified {
        display
      }
    }
    workYear
    workTypes
    mainLanguages {
      display
    }
    manifestations {
      latest {
        cover {
          detail
        }
      }
    }
  }
}`}
  variables={{
    id: "work-of:870970-basis:48953786",
  }}
/>

## Work Identifiers

A work is identified by a _work id_, _pid_, or _faust_, and either of them can be used to
fetch a work.

<InlineGraphiQL
  query={`query ($faust: String!) {
      work(faust: $faust) {
        workId
      }
    }`}
  variables={{
    faust: "48953786",
  }}
/>

<InlineGraphiQL
  query={`query ($pid: String!) {
      work(pid: $pid) {
        workId
      }
    }`}
  variables={{
    pid: "870970-basis:48953786",
  }}
/>

<InlineGraphiQL
  query={`query ($id: String!) {
      work(id: $id) {
        workId
      }
    }`}
  variables={{
    id: "work-of:870970-basis:48953786",
  }}
/>

## Fetch List of Works

It is possible to fetch multiple works in a single request by providing
a list of identifiers. The identifiers may be _a list of work ids_, _a list of pids_,
or _a list of fausts_.

The order of the works will match the order of provided identifiers.
If no work is found for an identifier, null is returned at the corresponding position.

<InlineGraphiQL
  query={`query ($faust: [String!]!) {
      works(faust: $faust) {
        workId
      }
    }`}
  variables={{
    faust: ["48953786", "61965815", "unknown-faust"],
  }}
/>

## Reviews

The reviews field returns a list of reviews. Each review may be one of the following types:

- `InfomediaReview` includes an ID that can be used to look up the actual
  article. Check out the [Infomedia section](#Infomedia).
- `ExternalReview` includes an url to an external website where the review is located.
- `LibrariansReview` is the librarians review. The entire review can be obtained from
  this object type, without the user is logged in. A review consists of a list of sections.
  A section may include a work. If so, the title should be appended to the text
  (preferably as a link).

<InlineGraphiQL
  query={`query ($id: String!) {
  work(id: $id) {
    workId
    titles {
      main
    }
    reviews {
      __typename
      author
      date
      ... on ExternalReview {
        rating
        urls {
          origin
          url
        }
      }
      ... on InfomediaReview {
        id
        rating
      }
      ... on LibrariansReview {
        sections {
          code
          heading
          text
          work {
            titles {
              main
            }
            creators {
              display
            }
          }
        }
      }
    }
  }
}`}
  variables={{
    id: "work-of:870970-basis:51701763",
  }}
/>

## Series

A work may be part of one or more series. The example below fetches the series title
as well as some information about how the work itself fits inside the series.

⚠️ Note that fake data is returned at this point.

<InlineGraphiQL
  query={`query ($workId: String!) {
  work(id: $workId) {
    series {
    	title
      isPopular
      numberInSeries {
        display
        number
      }
      readThisFirst
      readThisWhenever
    }
  }
}`}
  variables={{
    workId: "work-of:870970-basis:52557240",
  }}
/>

## Series Members

All the members (works) of a series that this work is member of (including itself).

<InlineGraphiQL
  query={`query ($workId: String!) {
  work(id: $workId) {
    seriesMembers {
      titles {
        main
      }
    }
  }
}`}
  variables={{
    workId: "work-of:870970-basis:52557240",
  }}
/>

## Translations

Some metadata may be available in english, specify a language and we will
translate data where possible.

Only fields named _display_, _summary_ etc. may contain translations.

<InlineGraphiQL
  query={`query ($workId: String!, $language: LanguageCode) {
    work(id: $workId, language: $language) {
      mainLanguages {
        display
        isoCode
      }
    }
  }`}
  variables={{
    workId: "work-of:870970-basis:52557240",
    language: "en",
  }}
/>
